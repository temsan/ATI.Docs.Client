
Процедура КнопкаВыполнитьНажатие(Кнопка)
	СтруктураВозврата = Новый Структура;
	СтруктураВозврата.Вставить("Комментарий", Комментарий);
	Если ЗначениеЗаполнено(ФайлИмя) Тогда
		СтруктураВозврата.Вставить("ФайлИмя", ФайлИмя);
	КонецЕсли;
	Закрыть(СтруктураВозврата);
КонецПроцедуры

Процедура ФайлИмяНачалоВыбора(Элемент, СтандартнаяОбработка)
	
	Диалог = Новый ДиалогВыбораФайла(РежимДиалогаВыбораФайла.Открытие);
	
	Диалог.ПолноеИмяФайла = ФайлИмя;
	
	Если Диалог.Выбрать() Тогда
		ВыбранныйФайл = Новый Файл(Диалог.ПолноеИмяФайла);
		Если ВыбранныйФайл.Размер()/1024/1024 > МаксимальныйРазмерФайла Тогда
			Сообщить("Выбранный файл превышает максимальный размер");
			Возврат;
		КонецЕсли;
		ФайлИмя = Диалог.ПолноеИмяФайла;
	КонецЕсли;

КонецПроцедуры

//служебная функция для автотеста
Процедура ВыполнитьКоманду(ТекстКоманды) Экспорт
	Выполнить(ТекстКоманды);
КонецПроцедуры
